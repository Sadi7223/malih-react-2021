{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/mathews/Reesby/React/NewMalihUI/src/views/app-views/components/data-display/list/InfiniteVirtualizedLoad.js\";\nimport React, { Component } from \"react\";\nimport { List, message, Avatar, Spin } from \"antd\";\nimport reqwest from \"reqwest\";\nimport WindowScroller from \"react-virtualized/dist/commonjs/WindowScroller\";\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport VList from \"react-virtualized/dist/commonjs/List\";\nimport InfiniteLoader from \"react-virtualized/dist/commonjs/InfiniteLoader\";\nconst fakeDataUrl = \"https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo\";\nexport class InfiniteVirtualizedLoad extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      loading: false\n    };\n    this.loadedRowsMap = {};\n\n    this.fetchData = callback => {\n      reqwest({\n        url: fakeDataUrl,\n        type: \"json\",\n        method: \"get\",\n        contentType: \"application/json\",\n        success: res => {\n          callback(res);\n        }\n      });\n    };\n\n    this.handleInfiniteOnLoad = ({\n      startIndex,\n      stopIndex\n    }) => {\n      let {\n        data\n      } = this.state;\n      this.setState({\n        loading: true\n      });\n\n      for (let i = startIndex; i <= stopIndex; i++) {\n        // 1 means loading\n        this.loadedRowsMap[i] = 1;\n      }\n\n      if (data.length > 19) {\n        message.warning(\"Virtualized List loaded all\");\n        this.setState({\n          loading: false\n        });\n        return;\n      }\n\n      this.fetchData(res => {\n        data = data.concat(res.results);\n        this.setState({\n          data,\n          loading: false\n        });\n      });\n    };\n\n    this.isRowLoaded = ({\n      index\n    }) => !!this.loadedRowsMap[index];\n\n    this.renderItem = ({\n      index,\n      key,\n      style\n    }) => {\n      const {\n        data\n      } = this.state;\n      const item = data[index];\n      return /*#__PURE__*/_jsxDEV(List.Item, {\n        style: style,\n        children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n          avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n            src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this),\n          title: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://ant.design\",\n            children: item.name.last\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 18\n          }, this),\n          description: item.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Content\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }, this);\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData(res => {\n      this.setState({\n        data: res.results\n      });\n    });\n  }\n\n  render() {\n    const {\n      data\n    } = this.state;\n\n    const vlist = ({\n      height,\n      isScrolling,\n      onChildScroll,\n      scrollTop,\n      onRowsRendered,\n      width\n    }) => /*#__PURE__*/_jsxDEV(VList, {\n      autoHeight: true,\n      height: height,\n      isScrolling: isScrolling,\n      onScroll: onChildScroll,\n      overscanRowCount: 2,\n      rowCount: data.length,\n      rowHeight: 73,\n      rowRenderer: this.renderItem,\n      onRowsRendered: onRowsRendered,\n      scrollTop: scrollTop,\n      width: width\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n\n    const autoSize = ({\n      height,\n      isScrolling,\n      onChildScroll,\n      scrollTop,\n      onRowsRendered\n    }) => /*#__PURE__*/_jsxDEV(AutoSizer, {\n      disableHeight: true,\n      children: ({\n        width\n      }) => vlist({\n        height,\n        isScrolling,\n        onChildScroll,\n        scrollTop,\n        onRowsRendered,\n        width\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this);\n\n    const infiniteLoader = ({\n      height,\n      isScrolling,\n      onChildScroll,\n      scrollTop\n    }) => /*#__PURE__*/_jsxDEV(InfiniteLoader, {\n      isRowLoaded: this.isRowLoaded,\n      loadMoreRows: this.handleInfiniteOnLoad,\n      rowCount: data.length,\n      children: ({\n        onRowsRendered\n      }) => autoSize({\n        height,\n        isScrolling,\n        onChildScroll,\n        scrollTop,\n        onRowsRendered\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(List, {\n      children: [data.length > 0 && /*#__PURE__*/_jsxDEV(WindowScroller, {\n        children: infiniteLoader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 29\n      }, this), this.state.loading && /*#__PURE__*/_jsxDEV(Spin, {\n        className: \"demo-loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nexport default InfiniteVirtualizedLoad;","map":{"version":3,"sources":["/home/mathews/Reesby/React/NewMalihUI/src/views/app-views/components/data-display/list/InfiniteVirtualizedLoad.js"],"names":["React","Component","List","message","Avatar","Spin","reqwest","WindowScroller","AutoSizer","VList","InfiniteLoader","fakeDataUrl","InfiniteVirtualizedLoad","state","data","loading","loadedRowsMap","fetchData","callback","url","type","method","contentType","success","res","handleInfiniteOnLoad","startIndex","stopIndex","setState","i","length","warning","concat","results","isRowLoaded","index","renderItem","key","style","item","name","last","email","componentDidMount","render","vlist","height","isScrolling","onChildScroll","scrollTop","onRowsRendered","width","autoSize","infiniteLoader"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { List, message, Avatar, Spin } from \"antd\";\r\n\r\nimport reqwest from \"reqwest\";\r\n\r\nimport WindowScroller from \"react-virtualized/dist/commonjs/WindowScroller\";\r\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\r\nimport VList from \"react-virtualized/dist/commonjs/List\";\r\nimport InfiniteLoader from \"react-virtualized/dist/commonjs/InfiniteLoader\";\r\n\r\nconst fakeDataUrl =\r\n  \"https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo\";\r\n\r\nexport class InfiniteVirtualizedLoad extends Component {\r\n  state = {\r\n    data: [],\r\n    loading: false\r\n  };\r\n\r\n  loadedRowsMap = {};\r\n\r\n  componentDidMount() {\r\n    this.fetchData(res => {\r\n      this.setState({\r\n        data: res.results\r\n      });\r\n    });\r\n  }\r\n\r\n  fetchData = callback => {\r\n    reqwest({\r\n      url: fakeDataUrl,\r\n      type: \"json\",\r\n      method: \"get\",\r\n      contentType: \"application/json\",\r\n      success: res => {\r\n        callback(res);\r\n      }\r\n    });\r\n  };\r\n\r\n  handleInfiniteOnLoad = ({ startIndex, stopIndex }) => {\r\n    let { data } = this.state;\r\n    this.setState({\r\n      loading: true\r\n    });\r\n    for (let i = startIndex; i <= stopIndex; i++) {\r\n      // 1 means loading\r\n      this.loadedRowsMap[i] = 1;\r\n    }\r\n    if (data.length > 19) {\r\n      message.warning(\"Virtualized List loaded all\");\r\n      this.setState({\r\n        loading: false\r\n      });\r\n      return;\r\n    }\r\n    this.fetchData(res => {\r\n      data = data.concat(res.results);\r\n      this.setState({\r\n        data,\r\n        loading: false\r\n      });\r\n    });\r\n  };\r\n\r\n  isRowLoaded = ({ index }) => !!this.loadedRowsMap[index];\r\n\r\n  renderItem = ({ index, key, style }) => {\r\n    const { data } = this.state;\r\n    const item = data[index];\r\n    return (\r\n      <List.Item key={key} style={style}>\r\n        <List.Item.Meta\r\n          avatar={\r\n            <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\r\n          }\r\n          title={<a href=\"https://ant.design\">{item.name.last}</a>}\r\n          description={item.email}\r\n        />\r\n        <div>Content</div>\r\n      </List.Item>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { data } = this.state;\r\n    const vlist = ({\r\n      height,\r\n      isScrolling,\r\n      onChildScroll,\r\n      scrollTop,\r\n      onRowsRendered,\r\n      width\r\n    }) => (\r\n      <VList\r\n        autoHeight\r\n        height={height}\r\n        isScrolling={isScrolling}\r\n        onScroll={onChildScroll}\r\n        overscanRowCount={2}\r\n        rowCount={data.length}\r\n        rowHeight={73}\r\n        rowRenderer={this.renderItem}\r\n        onRowsRendered={onRowsRendered}\r\n        scrollTop={scrollTop}\r\n        width={width}\r\n      />\r\n    );\r\n    const autoSize = ({\r\n      height,\r\n      isScrolling,\r\n      onChildScroll,\r\n      scrollTop,\r\n      onRowsRendered\r\n    }) => (\r\n      <AutoSizer disableHeight>\r\n        {({ width }) =>\r\n          vlist({\r\n            height,\r\n            isScrolling,\r\n            onChildScroll,\r\n            scrollTop,\r\n            onRowsRendered,\r\n            width\r\n          })\r\n        }\r\n      </AutoSizer>\r\n    );\r\n    const infiniteLoader = ({\r\n      height,\r\n      isScrolling,\r\n      onChildScroll,\r\n      scrollTop\r\n    }) => (\r\n      <InfiniteLoader\r\n        isRowLoaded={this.isRowLoaded}\r\n        loadMoreRows={this.handleInfiniteOnLoad}\r\n        rowCount={data.length}\r\n      >\r\n        {({ onRowsRendered }) =>\r\n          autoSize({\r\n            height,\r\n            isScrolling,\r\n            onChildScroll,\r\n            scrollTop,\r\n            onRowsRendered\r\n          })\r\n        }\r\n      </InfiniteLoader>\r\n    );\r\n    return (\r\n      <List>\r\n        {data.length > 0 && <WindowScroller>{infiniteLoader}</WindowScroller>}\r\n        {this.state.loading && <Spin className=\"demo-loading\" />}\r\n      </List>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InfiniteVirtualizedLoad;\r\n"]},"metadata":{},"sourceType":"module"}