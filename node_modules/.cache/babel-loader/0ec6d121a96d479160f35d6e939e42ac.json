{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/mathews/Reesby/React/NewMalihUI/emilusAntTheme-main/Emilus - React Admin Template/demo/src/views/app-views/components/data-entry/select/SearchBox.js\";\nimport React, { Component } from \"react\";\nimport { Select } from 'antd';\nimport jsonp from 'fetch-jsonp';\nimport querystring from 'querystring';\nconst {\n  Option\n} = Select;\nlet timeout;\nlet currentValue;\n\nfunction fetch(value, callback) {\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n\n  currentValue = value;\n\n  function fake() {\n    const str = querystring.encode({\n      code: 'utf-8',\n      q: value\n    });\n    jsonp(`https://suggest.taobao.com/sug?${str}`).then(response => response.json()).then(d => {\n      if (currentValue === value) {\n        const {\n          result\n        } = d;\n        const data = [];\n        result.forEach(r => {\n          data.push({\n            value: r[0],\n            text: r[0]\n          });\n        });\n        callback(data);\n      }\n    });\n  }\n\n  timeout = setTimeout(fake, 300);\n}\n\nclass SearchInput extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      value: undefined\n    };\n\n    this.handleSearch = value => {\n      if (value) {\n        fetch(value, data => this.setState({\n          data\n        }));\n      } else {\n        this.setState({\n          data: []\n        });\n      }\n    };\n\n    this.handleChange = value => {\n      this.setState({\n        value\n      });\n    };\n  }\n\n  render() {\n    const options = this.state.data.map(d => /*#__PURE__*/_jsxDEV(Option, {\n      children: d.text\n    }, d.value, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 46\n    }, this));\n    return /*#__PURE__*/_jsxDEV(Select, {\n      showSearch: true,\n      value: this.state.value,\n      placeholder: this.props.placeholder,\n      style: this.props.style,\n      defaultActiveFirstOption: false,\n      showArrow: false,\n      filterOption: false,\n      onSearch: this.handleSearch,\n      onChange: this.handleChange,\n      notFoundContent: null,\n      children: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport class SearchBox extends Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(SearchInput, {\n      placeholder: \"input search text\",\n      style: {\n        width: 200\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nexport default SearchBox;","map":{"version":3,"sources":["/home/mathews/Reesby/React/NewMalihUI/emilusAntTheme-main/Emilus - React Admin Template/demo/src/views/app-views/components/data-entry/select/SearchBox.js"],"names":["React","Component","Select","jsonp","querystring","Option","timeout","currentValue","fetch","value","callback","clearTimeout","fake","str","encode","code","q","then","response","json","d","result","data","forEach","r","push","text","setTimeout","SearchInput","state","undefined","handleSearch","setState","handleChange","render","options","map","props","placeholder","style","SearchBox","width"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Select } from 'antd';\r\nimport jsonp from 'fetch-jsonp';\r\nimport querystring from 'querystring';\r\n\r\nconst { Option } = Select;\r\n\r\nlet timeout;\r\nlet currentValue;\r\n\r\nfunction fetch(value, callback) {\r\n  if (timeout) {\r\n    clearTimeout(timeout);\r\n    timeout = null;\r\n  }\r\n  currentValue = value;\r\n\r\n  function fake() {\r\n    const str = querystring.encode({\r\n      code: 'utf-8',\r\n      q: value,\r\n    });\r\n    jsonp(`https://suggest.taobao.com/sug?${str}`)\r\n      .then(response => response.json())\r\n      .then(d => {\r\n        if (currentValue === value) {\r\n          const { result } = d;\r\n          const data = [];\r\n          result.forEach(r => {\r\n            data.push({\r\n              value: r[0],\r\n              text: r[0],\r\n            });\r\n          });\r\n          callback(data);\r\n        }\r\n      });\r\n  }\r\n\r\n  timeout = setTimeout(fake, 300);\r\n}\r\n\r\nclass SearchInput extends React.Component {\r\n  state = {\r\n    data: [],\r\n    value: undefined,\r\n  };\r\n\r\n  handleSearch = value => {\r\n    if (value) {\r\n      fetch(value, data => this.setState({ data }));\r\n    } else {\r\n      this.setState({ data: [] });\r\n    }\r\n  };\r\n\r\n  handleChange = value => {\r\n    this.setState({ value });\r\n  };\r\n\r\n  render() {\r\n    const options = this.state.data.map(d => <Option key={d.value}>{d.text}</Option>);\r\n    return (\r\n      <Select\r\n        showSearch\r\n        value={this.state.value}\r\n        placeholder={this.props.placeholder}\r\n        style={this.props.style}\r\n        defaultActiveFirstOption={false}\r\n        showArrow={false}\r\n        filterOption={false}\r\n        onSearch={this.handleSearch}\r\n        onChange={this.handleChange}\r\n        notFoundContent={null}\r\n      >\r\n        {options}\r\n      </Select>\r\n    );\r\n  }\r\n}\r\n\r\nexport class SearchBox extends Component {\r\n  render() {\r\n    return (\r\n      <SearchInput placeholder=\"input search text\" style={{ width: 200 }} />\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBox;\r\n"]},"metadata":{},"sourceType":"module"}